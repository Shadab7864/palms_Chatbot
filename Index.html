<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PALMS Warehouse — AI Assistant</title>

  <!-- Styles -->
  <link rel="stylesheet" href="style.css">

  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous">

</head>
<body>
  <!-- Floating toggle -->
  <button id="sidebar-toggle" class="sidebar-toggle" aria-label="Toggle sidebar">
    <i class="fas fa-bars"></i>
  </button>

  <!-- Left Sidebar (collapsible) -->
  <aside id="sidebar" class="sidebar" aria-label="Controls">
    <div class="sidebar-header">
      <div class="logo">
        <i class="fas fa-warehouse" aria-hidden="true"></i>
        <span class="logo-text">PALMS WMS</span>
      </div>
      <div class="session-id-box">
        <label class="small-label">Session</label>
        <div id="session-id" class="session-id"></div>
      </div>
    </div>

    <div class="sidebar-scroll">
      <!-- Model selection -->
      <section class="panel">
        <div class="panel-title">Model Selection</div>
        <select id="model-select" class="model-select" aria-label="Select model">
          <option value="phi3:mini">PHI3 Mini</option>
          <option value="gemma2:2b">GEMMA2 2B</option>
          <option value="llama3.2:1b">LLAMA3.2 1B</option>
          <option value="llama3.1">LLAMA3.1</option>
          <option value="mistral">Mistral</option>
        </select>
      </section>

      <!-- Documents -->
      <section class="panel">
        <div class="panel-title">Documents</div>

        <div id="file-upload-area" class="file-upload" tabindex="0" role="button" aria-label="Upload documents">
          <i class="fas fa-cloud-arrow-up"></i>
          <div class="muted">Upload docs (PDF, CSV, XLSX)</div>
          <input id="file-input" type="file" multiple hidden />
        </div>

        <div class="file-controls">
          <button id="refresh-files" class="btn small"><i class="fas fa-rotate"></i> Refresh</button>
          <button id="select-all-files" class="btn small ghost"><i class="fas fa-check-double"></i> Select All</button>
          <button id="delete-selected-files" class="btn small danger"><i class="fas fa-trash"></i> Delete</button>
        </div>

        <div class="file-list" id="file-list" role="list" aria-label="Uploaded documents">
          <!-- populated dynamically -->
        </div>
      </section>

      <!-- Recent chats (session-wise) -->
      <section class="panel">
        <div class="panel-title">Session Chat History</div>
        <div id="recent-chats" class="recent-chats" role="list" aria-label="Recent chats">
          <!-- session items -->
        </div>
        <div class="panel-footer">
          <button id="clear-history" class="btn small ghost"><i class="fas fa-broom"></i> Clear History</button>
        </div>
      </section>
    </div>

    <div class="sidebar-footer">
      <small>PALMS Warehouse System • Secure</small>
    </div>
  </aside>

  <!-- Main chat area -->
  <main id="main" class="main">
    <header class="topbar">
      <div class="left">
        <div class="app-title">
          <span class="title-strong">Warehouse AI Assistant</span>
          <span class="model-badge" id="current-model-badge" aria-live="polite">PHI3 Mini</span>
        </div>
      </div>

      <div class="right header-actions">
        <button id="new-chat-btn" class="icon-btn" title="New Chat"><i class="fas fa-plus"></i></button>
        <button id="settings-btn" class="icon-btn" title="Settings"><i class="fas fa-gear"></i></button>
      </div>
    </header>

    <section id="chat-box" class="chat-box" aria-live="polite">
      <div class="system-message">Welcome to PALMS Warehouse AI Assistant. Ask about inventory, shipments, or docs.</div>
    </section>

    <footer class="compose">
      <div class="compose-left">
        <input id="user-input" type="text" placeholder="Type a message (Shift+Enter for newline)" aria-label="Message input">
      </div>
      <div class="compose-right">
        <button id="send-btn" class="send-btn" title="Send (Enter)"><i class="fas fa-arrow-up"></i></button>
        <button id="cancel-btn" class="cancel-btn" title="Cancel stream" hidden><i class="fas fa-stop"></i></button>
      </div>
    </footer>
  </main>

  <!-- Live status for accessibility -->
  <div id="live-status" class="sr-only" aria-live="polite"></div>

  <!-- JS -->
  <script src="script.js" defer></script>
</body>
</html>
